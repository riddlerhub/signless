const validPositions=[[{x:40,y:40},{x:140,y:40},{x:240,y:40},{x:320,y:40},{x:440,y:40}],[{x:40,y:140},{x:-1,y:-1},{x:240,y:140},{x:-1,y:-1},{x:440,y:140}],[{x:40,y:240},{x:140,y:240},{x:240,y:240},{x:320,y:240},{x:440,y:240}],[{x:40,y:340},{x:-1,y:-1},{x:240,y:340},{x:-1,y:-1},{x:440,y:340}],[{x:40,y:440},{x:140,y:440},{x:240,y:440},{x:340,y:440},{x:440,y:440}]],getIndex=(e,o)=>{for(let i=0;i<validPositions.length;i++)for(let r=0;r<validPositions[i].length;r++)if(validPositions[i][r].x===e&&validPositions[i][r].y===o)return{x:i,y:r};return{x:-1,y:-1}},roomMappingIndexFirst={"0,0":"study","0,2":"hall","0,4":"lounge","2,0":"library","2,2":"billiard_room","2,4":"dining_room","4,0":"conservatory","4,2":"ballroom","4,4":"kitchen"},roomMapping={study:{indexX:0,indexY:0},hall:{indexX:0,indexY:2},lounge:{indexX:0,indexY:4},library:{indexX:2,indexY:0},billiard_room:{indexX:2,indexY:2},dining_room:{indexX:2,indexY:4},conservatory:{indexX:4,indexY:0},ballroom:{indexX:4,indexY:2},kitchen:{indexX:4,indexY:4}},startSpaces={plum:{x:112,y:158},white:{x:360,y:384},peacock:{x:114,y:356},green:{x:167,y:384},scarlet:{x:351,y:107},mustard:{x:411,y:168}},nextMoveAfterStart={plum:{pos:validPositions[1][0],indicies:[1,0]},white:{pos:validPositions[4][3],indicies:[4,3]},peacock:{pos:validPositions[3][0],indicies:[3,0]},green:{pos:validPositions[4][1],indicies:[4,1]},scarlet:{pos:validPositions[0][3],indicies:[0,3]},mustard:{pos:validPositions[1][4],indicies:[1,4]}};let myPieces={plum:null,white:null,peacock:null,green:null,scarlet:null,mustard:null},GLOBAL_CLIENT_STATE={connectedPlayerName:"",weapon:"",room:"",character:"",cards:[],playerRoomLocations:[]},socket=io.connect("http://"+document.domain+":"+location.port),actions={CLIENT_CONNECTION:"CLIENT_CONNECTION",JOIN_GAME:"JOIN_GAME",RESET_GAME:"RESET_GAME",START_GAME:"START_GAME",ACCUSE:"ACCUSE",DISPROVE:"DISPROVE",SUGGEST:"SUGGEST",END_TURN:"END_TURN"},responses={PLAYER_JOINED_GAME:"PLAYER_JOINED_GAME",PLAYER_ALREADY_JOINED:"PLAYER_ALREADY_JOINED",CLEARED_GAME_STATE:"CLEARED_GAME_STATE",MAXIMUM_PLAYER_REACHED:"MAXIMUM_PLAYER_REACHED",GAME_STARTED_STATE:"GAME_STARTED_STATE",SUGGEST_STATE:"SUGGEST_STATE",PRE_DISPROVE:"PRE_DISPROVE",DISPROVE_STATE:"DISPROVE_STATE",ACCUSE_STATE:"ACCUSE_STATE",ACCUSE_SUCCESS:"ACCUSE_SUCCESS",ACCUSE_FAILURE:"ACCUSE_FAILURE"};const weaponUri="/static/assets/weapons/",roomsUri="/static/assets/rooms/",charactersUri="/static/assets/characters/";let assetLocations={candlestick:weaponUri+"candlestick.jpg",knife:weaponUri+"knife.jpg",lead_pipe:weaponUri+"leadPipe.jpg",revolver:weaponUri+"revolver.jpg",rope:weaponUri+"rope.jpg",wrench:weaponUri+"wrench.jpg",ballroom:roomsUri+"ballroom.jpg",billiard_room:roomsUri+"billiardRoom.jpg",clue:roomsUri+"clue.jpg",conservatory:roomsUri+"conservatory.jpg",dining_room:roomsUri+"diningRoom.jpg",hall:roomsUri+"hall.jpg",kitchen:roomsUri+"kitchen.jpg",library:roomsUri+"library.jpg",lounge:roomsUri+"lounge.jpg",study:roomsUri+"study.jpg",mustard:charactersUri+"colonelMustard.jpg",scarlet:charactersUri+"missScarlet.jpg",green:charactersUri+"mrGreen.jpg",peacock:charactersUri+"mrsPeacock.jpg",white:charactersUri+"mrsWhite.jpg",plum:charactersUri+"professorPlum.jpg"},roomDiv=document.getElementById("room"),playerNamePrompt=document.getElementById("playerNamePrompt"),playerNamePromptErr=document.getElementById("playerNamePromptErr");